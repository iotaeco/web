/* Stop the tests from running while we manually load the modules */
window.__karma__.loaded = function () { };

var TEST_REGEXP = /base\/test.*(spec)\.js$/i;
var allTestFiles = [];

Object.keys(window.__karma__.files).forEach(function (file) {
    if (TEST_REGEXP.test(file)) {
        allTestFiles.push(file.replace(/^\/base\/|\.js$/g, ''));
    }
});

if (window.SystemJS) {
    Promise.all(window.preloadModules.map(function (module) { return window.SystemJS.import(module) }))
        .then(function () {
            Promise.all(allTestFiles.map(function (module) { return window.SystemJS.import(module) }))
                .then(function (modules) {
                    window.__karma__.start();
                });
        });
} else if (window.require) {
    window.require(window.preloadModules, function () {
        window.require(allTestFiles, function () {
            window.__karma__.start();
        });
    });
}

/* Generated by UniteJS */
